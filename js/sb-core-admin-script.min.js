window.sb_core=window.sb_core||{};var sb_ajax_loader;(function(e){function u(e){var t=true,n=e.slice(-4);if(n!=".png"&&n!=".jpg"&&n!=".gif"&&n!=".bmp"&&n!="jpeg"){t=false}return t}function a(e){var t=new RegExp("^(http://www.|https://www.|ftp://www.|www.){1}([0-9A-Za-z]+.)");if(t.test(e)){return true}return false}function f(e){var t=e,n=t.attr("data-name"),r=t.attr("data-count"),i=t.attr("data-type"),s=t.closest("div.sb-ui-panel"),o=s.find(".ui-item-order"),u=e.attr("data-next-id"),a=o.val(),f=null;f={action:"sb_add_ui_item",data_name:n,data_count:r,data_type:i,data_id:u};r++;if(!a.trim()){a+=u}else{a+=","+u}u++;e.attr("data-next-id",u);s.find("input.ui-item-count").val(r);o.val(a);e.attr("data-count",r);return f}function l(e,t){if(t){e.find("img").addClass("active")}else{e.find("img").removeClass("active")}}function c(e){var t=e.closest("div.sb-ui-panel"),n=t.find("button.ui-add-item"),r=t.find("input.ui-item-order"),i=t.find("input.ui-item-count");e.closest("div").find(".sb-sortable-list").html("");r.val("");i.val(0);n.attr("data-count",0);n.attr("data-next-id",1);l(e,false)}var t=e("div.sb-option"),n=e("#sb-options-form"),r=null,i=0,s="",o=e("body");window.sb_default_quick_tags=function(){QTags.addButton("hr","hr","<hr>\n","","w");QTags.addButton("dl","dl","<dl>\n","</dl>\n\n","w");QTags.addButton("dt","dt","	<dt>","</dt>\n","w");QTags.addButton("dd","dd","	<dd>","</dd>\n","w")};sb_core.sb_ajax_loader=function(t){var n=e("div.sb-ajax-loader");if(t){n.addClass("active")}else{n.removeClass("active")}};window.sb_get_admin_post_type=function(){return e('input[name="post_type"]').val()};(function(){e("div.sb-option .section-item > a").on("click",function(){var t=e(this);if(t.parent().hasClass("active")){return false}})})();(function(){if(!n.find("h3.setting-title").length&&n.attr("data-page")!="sb-options"){n.css({display:"none"})}if(n.find("div.sb-plugins").length){n.find("p.submit").css({display:"none"});n.find("div.reset-button").css({display:"none"})}})();(function(){setTimeout(function(){t.find("div.updated").fadeOut(2e3);var e=window.location.href;if(e.indexOf("settings-updated")>=0&&t.length){e=e.slice(0,e.indexOf("&"));window.history.pushState("string","",e)}},1e3)})();(function(){t.find("label.switch-button").each(function(){var t=e(this);t.click(function(){t=e(this);var n="on",r=0,i=t.attr("data-switch"),s;if(n==i){n="off";r=1}s=t.closest("div.switch-options").find('[data-switch="'+n+'"]');s.removeClass("active");t.addClass("active");t.closest("div.switch-options").find("input").val(r)})})})();(function(){var n=t.find("div.sb-plugins");if(n.length){var r=n.attr("data-plugin"),i=r.split(",");e.each(i,function(t,r){var i={action:"sb_plugins",sb_plugin_slug:r};e.post(sb_core_admin_ajax.url,i,function(e){n.find(".sb-plugin-list").prepend(e)})});e(document).ajaxStop(function(){n.find(".sb-ajax-load").fadeOut()})}})();(function(){t.find("div.reset-button > span").on("click",function(){var t=e(this),n=t.parent().parent().attr("data-page"),r={action:"sb_option_reset",sb_option_page:t.parent().parent().attr("data-page")};t.find("img").css({display:"inline-block"});e.post(sb_core_admin_ajax.url,r,function(r){var i=e.parseJSON(r),s=t.parent().parent();if(typeof i=="object"){if(n=="sb_paginate"){s.find('input[name="sb_options[paginate][label]"]').val(i["label"]);s.find('input[name="sb_options[paginate][next_text]"]').val(i["next_text"]);s.find('input[name="sb_options[paginate][previous_text]"]').val(i["previous_text"]);s.find('input[name="sb_options[paginate][range]"]').val(i["range"]);s.find('input[name="sb_options[paginate][anchor]"]').val(i["anchor"]);s.find('input[name="sb_options[paginate][gap]"]').val(i["gap"]);s.find('select[name="sb_options[paginate][style]"]').val(i["style"]);s.find('select[name="sb_options[paginate][border_radius]"]').val(i["border_radius"])}}t.find("img").css({display:"none"})})})})();(function(){function n(t){var n=e('<li class="ui-state-default sb-sidebar-custom"/>'),r=parseInt(t.attr("data-sidebar"))+1;$html='<div class="sb-sidebar-line"><input type="text" name="'+t.attr("data-name")+"["+r+'][name]"><input type="text" name="'+t.attr("data-name")+"["+r+'][description]"><input type="text" name="'+t.attr("data-name")+"["+r+'][id]"></div>';t.attr("data-sidebar",r);$html+='<img src="'+t.attr("data-icon-drag")+'" class="sb-icon-drag">';$html+='<img src="'+t.attr("data-icon-delete")+'" class="sb-icon-delete">';n.attr("data-sidebar",r);n.html($html);t.append(n);t.parent().find(".sb-sidebar-count").val(r);t.sortable("refresh")}if(e("#sb-sortable-sidebar").length){e("#sb-sortable-sidebar").sortable({cancel:":input, .ui-state-disabled, .sb-icon-delete",placeholder:"ui-state-highlight"})}e("button.sb-add-sidebar").on("click",function(t){t.preventDefault();var r=e(this).parent().find(".ui-sortable");n(r);return false});t.delegate(".sb-icon-delete","click",function(){var t=e(this),n=t.parent(),r=n.parent(),i=false,s=parseInt(r.attr("data-sidebar"))-1;if(!n.hasClass("sb-default-sidebar")){n.find("input").each(function(){if(""!=e(this).val()){i=true}});if(i&&confirm(r.attr("data-message-confirm"))){t.parent().remove();r.attr("data-sidebar",s);r.parent().find(".sb-sidebar-count").val(s)}else{t.parent().remove();r.attr("data-sidebar",s);r.parent().find(".sb-sidebar-count").val(s)}}})})();(function(){e("#sb-core span.deactivate > a").attr("href","javascript:;");e("#sb-core span.deactivate > a").on("click",function(){var t=e(this),n=null,r=t.attr("href");n={action:"sb_core_deactivate_message"};e.post(sb_core_admin_ajax.url,n,function(t){if(confirm(t)){n={action:"sb_deactivate_all_sb_product"};e.post(sb_core_admin_ajax.url,n,function(){window.location=window.location.pathname})}else{return false}});return false});if(e("#sb-core").hasClass("inactive")){var t={action:"sb_deactivate_all_sb_product"};e.post(sb_core_admin_ajax.url,t,function(e){})}})();(function(){e("#sb-core a.thickbox").each(function(t,n){var r=e(this),i=r.closest("tr#sb-core"),s=null;r.attr("href","https://wordpress.org/plugins/sb-core/");r.attr("target","_blank");if(i.hasClass("update")){s=i.next();if(s.hasClass("plugin-update-tr")){s.fadeOut();s.remove();i.children().each(function(t,n){e(n).css({"box-shadow":"0 -1px 0 rgba(0, 0, 0, 0.1) inset"})});s.find("a").each(function(t,n){if(e(this).hasClass("thickbox")){e(this).attr("href","https://wordpress.org/plugins/sb-core/");e(this).attr("target","_blank");e(this).on("click",function(t){t.preventDefault();window.open(e(this).attr("href"));return false})}else{e.post(sb_core_admin_ajax.url,{action:"sb_core_get_admin_url",name:"update-core.php"},function(t){e(n).attr("href",t)})}})}}});e("#sb-core a.thickbox").on("click",function(t){t.preventDefault();var n=e(this);window.open(n.attr("href"));return false})})();(function(){e("ul.sb-sortable-list.active-sortable").each(function(t,n){var r=e(this),i=r,s=i.closest("div.sb-sortable"),o=null,u=0,a=0;if(i.length){o=s.find("ul.sb-sortable-list.sortable-source");if(o.length){a=i.height();u=o.height();if(a<u){i.css({height:u})}}}});if(!e("ul.sb-sortable-list").hasClass("ui-sortable")){var t=false,n=null;if(!e("ul.sb-sortable-list").length){return}e("ul.sb-sortable-list").sortable({cancel:":input, .ui-state-disabled, .sb-icon-delete",connectWith:".connected-sortable",placeholder:"ui-state-highlight",receive:function(e,n){t=false},over:function(e,n){t=false},out:function(e,n){t=true},beforeStop:function(n,r){var i=e(r.item),s=i.parent();if(t&&s.hasClass("out-remove")){var o=r.item.closest("div.sb-ui-panel"),u=o.find("input.ui-item-count"),a=parseInt(u.val());a--;u.val(a);o.find("button.ui-add-item").attr("data-count",a);r.item.remove()}},sort:function(t,n){var r=e(this);r.find(".ui-state-highlight").css({height:n.item.height()})},stop:function(t,n){var r="",i=e(n.item),s=null,o=null,u=i.closest("div.sb-sortable"),a=u.find(".sb-sortable-list.active-sortable"),f=u.find(".sb-sortable-list.sortable-source");if(a.children().length<f.children().length){a.css({height:f.height()})}else{a.css({height:"auto"})}s=u.find("input.ui-item-order");o=u.find("input.active-sortalbe-value");if(s.length){u.find("ul.sb-sortable-list li").each(function(t,n){var i=e(n).find(".ui-item-id").val();r+=i+","});r=r.slice(0,-1);s.val(r)}if(o.length){r="";u.find("ul.sb-sortable-list.active-sortable li").each(function(t,n){var i=e(n).attr("data-term");if(r.indexOf(i)!=-1){return}else{r+=i+","}});r=r.slice(0,-1);u.find(".active-sortalbe-value").val(r)}}}).disableSelection()}})();(function(){e(".sb-ui-panel button.reset").on("click",function(t){t.preventDefault();var n=e(this),r=null,i=n.attr("data-type"),s=n.closest("div.sb-option");if(confirm(s.attr("data-message-confirm"))){l(n,true);r={action:"sb_ui_reset",data_type:i};e.post(sb_core_admin_ajax.url,r,function(e){c(n)})}})})();(function(){e("button.ui-add-item").on("click",function(t){t.preventDefault();var n=e(this),r=n.parent().find(".sb-sortable-list");e.post(sb_core_admin_ajax.url,f(n),function(e){r.append(e)})})})();(function(){e(".sb-insert-media").on("click",function(t){var n=e(this),s=n.closest("div.sb-media-upload"),o=s.find(".image-preview"),u=s.find(".image-upload-container"),a=u.find("input"),f="";if(n.hasClass("delegate")){return}t.preventDefault();if(!s.length){s=n.closest("p.sb-media-upload");a=s.find("input")}if(!a.length){a=s.find("input.image-url")}if(r){r.uploader.uploader.param("post_id",i);r.open();return}r=wp.media({title:"Insert Media",button:{text:"Use this image"},multiple:false});r.on("select",function(){f=window.sb_receive_media_upload(r);if(e.trim(f)){a.val(f);if(o.length){o.html('<img src="'+f+'">');o.addClass("has-image")}}r=null});r.open()});e(".sb-remove-media").on("click",function(t){var n=e(this),r=n.closest("div.sb-media-upload"),i=r.find(".image-preview"),s=r.find(".image-upload-container"),o=s.find("input");if(n.hasClass("delegate")){return}t.preventDefault();if(!r.length){r=n.closest("p.sb-media-upload");o=r.find("input")}o.val("");if(i.length){i.removeClass("has-image");i.html("")}});e(".sb-media-upload .image-url").bind("change input",function(t){t.preventDefault();var n=e(this),r=n.closest("div.sb-media-upload"),i=r.find(".image-preview"),s=n.val();if(!r.length){r=n.closest("p.sb-media-upload");i=r.find(".image-preview")}if(s.trim()&&u(s)){i.html('<img src="'+s+'">');i.addClass("has-image")}else{i.html("");i.removeClass("has-image")}})})();window.sb_receive_media_upload=function(e){var t=e.state().get("selection").first().toJSON();s=wp.media.model.settings.post.id;return t.url}})(jQuery)